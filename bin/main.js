// Generated by CoffeeScript 1.10.0
(function() {
  var Thingy;

  Thingy = require("./thingy");

  Thingy.add("test1", function(magic) {
    return {
      init: function() {
        return console.log("Test 1");
      },
      destroy: function() {
        return console.log("Poof 1");
      }
    };
  });

  Thingy.add("test2", function(magic) {
    return {
      init: function() {
        console.log("Test 2");
        return this.talk();
      },
      talk: function() {
        return magic.cast({
          name: "new-message",
          data: {
            name: "aewens",
            text: "he does things"
          }
        });
      },
      destroy: function() {
        return console.log("Poof 2");
      }
    };
  });

  Thingy.add("test3", function(magic) {
    return {
      init: function() {
        console.log("Test 3");
        return magic.listen("new-message", this.talk);
      },
      talk: function(data) {
        return console.log(data);
      },
      destroy: function() {
        return console.log("Poof 3");
      }
    };
  });

  Thingy.start("test1").then(function() {
    return Thingy.start("test2");
  });

  Thingy.start("test3");

}).call(this);
